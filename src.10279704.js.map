{"version":3,"sources":["ab_testing/api/analytics.js","ab_testing/constants.js","ab_testing/api/session.js","ab_testing/library/mapVariations.js","ab_testing/library/setRandomVariation.js","ab_testing/library/showVariation.js","ab_testing/index.js","index.js"],"names":["Analytics","instance","Object","freeze","variation","track","metric","console","log","params","url","analyticsClient","CONSTANTS","Variation","Control","Test","PageView","Performed","Session","sessionStorage","setItem","getItem","value","sessionClient","mapVariations","variationNodes","document","querySelectorAll","forEach","node","style","display","dataset","addEventListener","e","preventDefault","stopPropagation","getMetricPerformed","setMetricPerformed","trackEvent","control","push","test","warn","setRandomVariation","keys","Math","floor","random","length","setVariation","showVariation","getVariation","mountAbTesting","getPageView","setPageView","trackPageview","window","location","href"],"mappings":"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","file":"src.10279704.js","sourceRoot":"../src","sourcesContent":["class Analytics {\n  constructor() {\n    // Singleton\n    if (Analytics.instance instanceof Analytics) {\n      return Analytics.instance;\n    }\n    Object.freeze(this);\n    Analytics.instance = this;\n  }\n\n  trackEvent(variation, track, metric) {\n    console.log(\n      `--> Variation: ${variation}, Track: ${track}, Metric: ${metric}`\n    );\n  }\n\n  trackPageview(params) {\n    console.log(`--> Pageview URL: ${params.url}`);\n  }\n}\n\nconst analyticsClient = new Analytics();\n\nexport { analyticsClient };\n","const CONSTANTS = {\n  Variation: \"variation\",\n  Control: \"control\",\n  Test: \"test\",\n  PageView: \"pageView\",\n  Performed: \"performed\"\n};\n\nexport { CONSTANTS };\n","import { CONSTANTS } from '../constants';\n\nclass Session {\n  constructor() {\n    // Singleton\n    if (Session.instance instanceof Session) {\n      return Session.instance;\n    }\n    Object.freeze(this);\n    Session.instance = this;\n  }\n  setPageView() {\n    sessionStorage.setItem(CONSTANTS.PageView, CONSTANTS.Performed);\n  }\n\n  getPageView() {\n    return sessionStorage.getItem(CONSTANTS.PageView);\n  }\n\n  setVariation(value) {\n    sessionStorage.setItem(CONSTANTS.Variation, value);\n  }\n\n  getVariation() {\n    return sessionStorage.getItem(CONSTANTS.Variation);\n  }\n\n  setMetricPerformed(metric) {\n    sessionStorage.setItem(metric, CONSTANTS.Performed);\n  }\n\n  getMetricPerformed(metric) {\n    return sessionStorage.getItem(metric);\n  }\n}\nconst sessionClient = new Session();\n\nexport { sessionClient };\n","import { analyticsClient } from '../api/analytics';\nimport { sessionClient } from '../api/session';\nimport { CONSTANTS } from '../constants';\n\nexport function mapVariations(variationNodes) {\n  document.querySelectorAll('[data-variation]').forEach((node) => {\n    node.style.display = 'none';\n\n    const { variation, track, metric } = node.dataset;\n\n    if (typeof track !== 'undefined') {\n      node.addEventListener(track, (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        if (sessionClient.getMetricPerformed(metric) === CONSTANTS.Performed) {\n          console.log(\n            `TRACK:Metric \"${metric}\" already performed by user during this session.`\n          );\n          return;\n        }\n        sessionClient.setMetricPerformed(metric);\n        analyticsClient.trackEvent(variation, track, metric);\n      });\n    }\n\n    if (variation === CONSTANTS.Control) {\n      variationNodes.control.push(node);\n    } else if (variation === CONSTANTS.Test) {\n      variationNodes.test.push(node);\n    } else {\n      console.warn(\n        `Unsupported variation type, only \"${CONSTANTS.Control}\" and \"${CONSTANTS.Test}\" types are allowed but found \"${variation}\"`\n      );\n    }\n  });\n}\n","import { sessionClient } from '../api/session';\n\nexport function setRandomVariation(variationNodes) {\n  const keys = Object.keys(variationNodes);\n  const variation = keys[Math.floor(Math.random() * keys.length)];\n\n  sessionClient.setVariation(variation);\n}\n","import { sessionClient } from '../api/session';\n\nexport function showVariation(variationNodes) {\n  variationNodes[sessionClient.getVariation()].forEach((node) => {\n    node.style.display = null;\n  });\n}\n","import { analyticsClient } from './api/analytics';\nimport { sessionClient } from './api/session';\nimport { CONSTANTS } from './constants';\nimport { mapVariations } from './library/mapVariations';\nimport { setRandomVariation } from './library/setRandomVariation';\nimport { showVariation } from './library/showVariation';\n\nexport function mountAbTesting() {\n  if (sessionClient.getPageView() !== CONSTANTS.Performed) {\n    sessionClient.setPageView();\n    analyticsClient.trackPageview({ url: window.location.href });\n  } else {\n    console.log(\n      `TRACK:PageView already performed by user during this session.`\n    );\n  }\n\n  const variationNodes = {\n    control: [],\n    test: [],\n  };\n\n  mapVariations(variationNodes);\n\n  if (sessionClient.getVariation() === null) {\n    setRandomVariation(variationNodes);\n  }\n\n  showVariation(variationNodes);\n\n  console.log(`Variation selected: ${sessionClient.getVariation()}`);\n}\n","import './styles.scss';\nimport { mountAbTesting } from './ab_testing';\n\nmountAbTesting();\n"]}